<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WineLab Margin Calculator</title>
    <meta property="og:title" content="WineLab Margin Calculator">
    <meta property="og:description" content="Compare your margins and discover better options">
    <meta property="og:image" content="https://cdn.simulationtheory.ai/gasset/?asset=img&prompt=wine+glass+calculator&w=64&h=64">
    <meta property="og:type" content="website">
    <link rel="icon" type="image/png" href="https://cdn.simulationtheory.ai/gasset/?asset=img&prompt=wine+glass+icon&w=32&h=32">

        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                padding: 20px;
            }

            .container {
                max-width: 900px;
                margin: 0 auto;
            }

            .header {
                text-align: center;
                color: white;
                margin-bottom: 40px;
            }

            .header h1 {
                font-size: 2.5em;
                margin-bottom: 10px;
                text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            }

            .header p {
                font-size: 1.2em;
                opacity: 0.9;
            }

            .category-selection {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                gap: 20px;
                margin-bottom: 30px;
            }

            .category-btn {
                background: white;
                border: none;
                padding: 30px 20px;
                border-radius: 15px;
                font-size: 1.2em;
                font-weight: bold;
                color: #667eea;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            }

            .category-btn:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 12px rgba(0,0,0,0.2);
            }

            .category-btn.active {
                background: #667eea;
                color: white;
            }

            .input-section {
                display: none;
                background: white;
                padding: 30px;
                border-radius: 15px;
                box-shadow: 0 8px 16px rgba(0,0,0,0.1);
                margin-bottom: 30px;
            }

            .input-section.active {
                display: block;
                animation: fadeIn 0.3s ease;
            }

            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }

            .section-title {
                font-size: 1.8em;
                color: #667eea;
                margin-bottom: 20px;
                text-align: center;
            }

            .form-group {
                margin-bottom: 20px;
            }

            .form-row {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
                margin-bottom: 20px;
            }

            .form-col {
                display: flex;
                flex-direction: column;
            }

            label {
                display: block;
                margin-bottom: 8px;
                color: #333;
                font-weight: 600;
            }

            input, select {
                width: 100%;
                padding: 12px;
                border: 2px solid #e0e0e0;
                border-radius: 8px;
                font-size: 1em;
                transition: border-color 0.3s ease;
            }

            input:focus, select:focus {
                outline: none;
                border-color: #667eea;
            }

            .radio-group {
                display: flex;
                gap: 20px;
                flex-wrap: wrap;
            }

            .radio-option {
                flex: 1;
                min-width: 150px;
            }

            .radio-option input[type="radio"] {
                width: auto;
                margin-right: 8px;
            }

            .radio-option label {
                display: inline;
                font-weight: normal;
                cursor: pointer;
            }

            .results {
                display: none;
                background: #f8f9fa;
                padding: 20px;
                border-radius: 10px;
                margin-top: 20px;
            }

            .results.active {
                display: block;
            }

            .result-item {
                display: flex;
                justify-content: space-between;
                padding: 10px 0;
                border-bottom: 1px solid #e0e0e0;
            }

            .result-item:last-child {
                border-bottom: none;
            }

            .result-label {
                font-weight: 600;
                color: #555;
            }

            .result-value {
                font-size: 1.2em;
                font-weight: bold;
                color: #667eea;
            }

            .compare-btn {
                width: 100%;
                padding: 15px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border: none;
                border-radius: 10px;
                font-size: 1.1em;
                font-weight: bold;
                cursor: pointer;
                margin-top: 20px;
                transition: transform 0.3s ease;
            }

            .compare-btn:hover {
                transform: scale(1.02);
            }

            .compare-btn:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }

            .comparison-section {
                display: none;
                margin-top: 30px;
            }

            .comparison-section.active {
                display: block;
                animation: fadeIn 0.3s ease;
            }

            .comparison-grid {
                display: grid;
                gap: 20px;
                margin-top: 20px;
            }

            .comparison-card {
                background: white;
                padding: 20px;
                border-radius: 15px;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            }

            .comparison-card.your-product {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
            }

            .card-title {
                font-size: 1.3em;
                font-weight: bold;
                margin-bottom: 15px;
                text-align: center;
            }

            .product-image {
                width: 100%;
                max-width: 300px;
                height: 300px;
                object-fit: contain;
                border-radius: 10px;
                margin: 0 auto 15px auto;
                display: block;
                background: #f8f9fa;
            }

            .card-details {
                display: grid;
                gap: 10px;
            }

            .detail-row {
                display: flex;
                justify-content: space-between;
                padding: 8px 0;
                border-bottom: 1px solid rgba(0,0,0,0.1);
            }

            .comparison-card.your-product .detail-row {
                border-bottom: 1px solid rgba(255,255,255,0.2);
            }

            .detail-row:last-child {
                border-bottom: none;
            }

            .back-btn {
                background: white;
                color: #667eea;
                padding: 10px 20px;
                border: 2px solid #667eea;
                border-radius: 8px;
                font-weight: bold;
                cursor: pointer;
                margin-bottom: 20px;
            }

            .back-btn:hover {
                background: #667eea;
                color: white;
            }

            .try-price-section {
                margin-top: 15px;
                padding-top: 15px;
                border-top: 2px solid #667eea;
            }

            .try-price-title {
                font-weight: bold;
                color: #667eea;
                margin-bottom: 10px;
                font-size: 1.1em;
            }

            .try-price-input {
                display: flex;
                gap: 10px;
                align-items: center;
                margin-bottom: 10px;
            }

            .try-price-input input {
                flex: 1;
                padding: 8px;
                border: 2px solid #e0e0e0;
                border-radius: 6px;
                font-size: 0.95em;
            }

            .try-price-results {
                display: none;
                background: #f0f4ff;
                padding: 10px;
                border-radius: 6px;
                margin-top: 10px;
            }

            .try-price-results.active {
                display: block;
            }

            .try-price-results .detail-row {
                padding: 5px 0;
                font-size: 0.95em;
            }

            @media (max-width: 768px) {
                .header h1 {
                    font-size: 2em;
                }

                .category-btn {
                    padding: 20px 15px;
                    font-size: 1em;
                }

                .input-section {
                    padding: 20px;
                }

                .form-row {
                    grid-template-columns: 1fr;
                }

                .product-image {
                    max-width: 250px;
                    height: 250px;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1>üç∑ WineLab Margin Calculator</h1>
                <p>Compare your margins and discover better options</p>
            </div>

            <div id="categorySelection" class="category-selection">
                <button class="category-btn" onclick="selectCategory('draught')">
                    üç∫ Draught Beer
                </button>
                <button class="category-btn" onclick="selectCategory('cocktail')">
                    üç∏ Handmade Pornstar Martini
                </button>
                <button class="category-btn" onclick="selectCategory('custom')">
                    üìä Check Cost & Margin
                </button>
            </div>

            <div id="draughtSection" class="input-section">
                <h2 class="section-title">Draught Beer</h2>
            
                <div class="form-group">
                    <label>Select Beer:</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="guinness" name="beer" value="guinness" onchange="calculateDraughtMargin()">
                            <label for="guinness">Guinness (‚Ç¨240/50L)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="heineken" name="beer" value="heineken" onchange="calculateDraughtMargin()">
                            <label for="heineken">Heineken (‚Ç¨196/50L)</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="moretti" name="beer" value="moretti" onchange="calculateDraughtMargin()">
                            <label for="moretti">Moretti (‚Ç¨240/50L)</label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="draughtServing">Serving Size:</label>
                    <select id="draughtServing" onchange="calculateDraughtMargin()">
                        <option value="">Select serving size</option>
                        <option value="pint">Pint (568ml)</option>
                        <option value="half">Half Pint (284ml)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="draughtSellPrice">Sell Price (inc VAT):</label>
                    <input type="number" id="draughtSellPrice" placeholder="‚Ç¨0.00" step="0.01" oninput="calculateDraughtMargin()">
                </div>

                <div id="draughtResults" class="results">
                    <div class="result-item">
                        <span class="result-label">Gross Profit %:</span>
                        <span class="result-value" id="draughtGP">0%</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Cash Margin per Serve:</span>
                        <span class="result-value" id="draughtMargin">‚Ç¨0.00</span>
                    </div>
                </div>

                <button class="compare-btn" id="draughtCompareBtn" onclick="showComparison('draught')" disabled>
                    See What Margin You Could Be Banking
                </button>
            </div>

            <div id="cocktailSection" class="input-section">
                <h2 class="section-title">Handmade Pornstar Martini</h2>
            
                <div class="form-group">
                    <label>Cost per Cocktail: ‚Ç¨3.07 (ex VAT)</label>
                </div>

                <div class="form-group">
                    <label for="cocktailSellPrice">Sell Price (inc VAT):</label>
                    <input type="number" id="cocktailSellPrice" placeholder="‚Ç¨0.00" step="0.01" oninput="calculateCocktailMargin()">
                </div>

                <div id="cocktailResults" class="results">
                    <div class="result-item">
                        <span class="result-label">Gross Profit %:</span>
                        <span class="result-value" id="cocktailGP">0%</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Cash Margin per Cocktail:</span>
                        <span class="result-value" id="cocktailMargin">‚Ç¨0.00</span>
                    </div>
                </div>

                <button class="compare-btn" id="cocktailCompareBtn" onclick="showComparison('cocktail')" disabled>
                    See What Margin You Could Be Banking
                </button>
            </div>

            <div id="customSection" class="input-section">
                <h2 class="section-title">Check Cost & Margin</h2>
            
                <div class="form-row">
                    <div class="form-col">
                        <label for="customProductSize">Product Size:</label>
                        <select id="customProductSize" onchange="calculateCustomMargin()">
                            <option value="">Select size</option>
                            <option value="50000">50L Keg</option>
                            <option value="30000">30L Keg</option>
                            <option value="20000">20L Keg</option>
                            <option value="1000">1L Bottle</option>
                            <option value="750">750ml Bottle</option>
                            <option value="500">500ml Bottle</option>
                            <option value="330">330ml Bottle</option>
                        </select>
                    </div>

                    <div class="form-col">
                        <label for="customCost">Product Cost (‚Ç¨, ex VAT):</label>
                        <input type="number" id="customCost" placeholder="0.00" step="0.01" oninput="calculateCustomMargin()">
                    </div>

                    <div class="form-col">
                        <label for="customServing">Serving Size:</label>
                        <select id="customServing" onchange="calculateCustomMargin()">
                            <option value="">Select serving</option>
                            <option value="568">Pint (568ml)</option>
                            <option value="284">Half Pint (284ml)</option>
                            <option value="250">250ml</option>
                            <option value="175">175ml</option>
                            <option value="150">150ml</option>
                            <option value="125">125ml</option>
                            <option value="50">50ml (Spirit)</option>
                            <option value="35">35ml (Spirit)</option>
                            <option value="25">25ml (Spirit)</option>
                        </select>
                    </div>

                    <div class="form-col">
                        <label for="customSellPrice">Your Sell Price (‚Ç¨, inc VAT):</label>
                        <input type="number" id="customSellPrice" placeholder="0.00" step="0.01" oninput="calculateCustomMargin()">
                    </div>
                </div>

                <div id="customResults" class="results">
                    <div class="result-item">
                        <span class="result-label">Gross Profit %:</span>
                        <span class="result-value" id="customGP">0%</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Cash Margin per Serve:</span>
                        <span class="result-value" id="customMargin">‚Ç¨0.00</span>
                    </div>
                </div>

                <button class="compare-btn" id="customCompareBtn" onclick="showComparison('custom')" disabled>
                    See What Margin You Could Be Banking
                </button>
            </div>

            <div id="comparisonSection" class="comparison-section">
                <button class="back-btn" onclick="backToInput()">‚Üê Back</button>
            
                <div class="comparison-grid" id="comparisonGrid">
                </div>
            </div>
        </div>

        <script>
            let currentCategory = null;
            let currentProductData = null;

            const winelabProducts = [
                {
                    name: "Espresso Martini on Tap",
                    costPerL: 17.15,
                    image: "https://res.cloudinary.com/dimqqmfx6/image/upload/v1759831545/u1007100423_COCKTAIL-EXPRESSOMARTINI_nme5fh.jpg",
                    portions: [
                        { size: 125, sellPrice: 12.00 },
                        { size: 150, sellPrice: 14.00 }
                    ]
                },
                {
                    name: "Pornstar Martini on Tap",
                    costPerL: 15.85,
                    image: "https://res.cloudinary.com/dimqqmfx6/image/upload/v1759831540/u1007100420_COCKTAIL-PORNSTAR_ky3rsi.jpg",
                    portions: [
                        { size: 125, sellPrice: 12.00 },
                        { size: 150, sellPrice: 14.00 }
                    ]
                },
                {
                    name: "Whiskey Sour on Tap",
                    costPerL: 17.15,
                    image: "https://res.cloudinary.com/dimqqmfx6/image/upload/v1759831543/u1007100421_COCKTAIL-WHISKEYSOUR_otjllf.jpg",
                    portions: [
                        { size: 125, sellPrice: 12.00 },
                        { size: 150, sellPrice: 14.00 }
                    ]
                },
                {
                    name: "Frizzante on Tap",
                    costPerL: 12.50,
                    image: "https://res.cloudinary.com/dimqqmfx6/image/upload/v1759831661/u1007100733_prosecco_bs5pqi.jpg",
                    portions: [
                        { size: 150, sellPrice: 8.00 },
                        { size: 150, sellPrice: 9.00 }
                    ]
                },
                {
                    name: "Weekend Drinks Bottled Cocktails",
                    costPerL: 22.50,
                    image: "https://res.cloudinary.com/dimqqmfx6/image/upload/v1759831547/u1007100424_1L_g7tanf.jpg",
                    portions: [
                        { size: 125, sellPrice: 12.00 },
                        { size: 125, sellPrice: 14.00 }
                    ]
                }
            ];
        
            function selectCategory(category) {
                currentCategory = category;
            
                document.querySelectorAll('.input-section').forEach(section => {
                    section.classList.remove('active');
                });
            
                document.getElementById('comparisonSection').classList.remove('active');
            
                if (category === 'draught') {
                    document.getElementById('draughtSection').classList.add('active');
                } else if (category === 'cocktail') {
                    document.getElementById('cocktailSection').classList.add('active');
                } else if (category === 'custom') {
                    document.getElementById('customSection').classList.add('active');
                }
            
                document.querySelectorAll('.category-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
            }

            function removeVAT(priceIncVAT) {
                return priceIncVAT / 1.23;
            }

            function addVAT(priceExVAT) {
                return priceExVAT * 1.23;
            }

            function calculateDraughtMargin() {
                const beer = document.querySelector('input[name="beer"]:checked');
                const serving = document.getElementById('draughtServing').value;
                const sellPrice = parseFloat(document.getElementById('draughtSellPrice').value);

                if (!beer || !serving || !sellPrice) {
                    document.getElementById('draughtCompareBtn').disabled = true;
                    return;
                }

                const beerCosts = {
                    guinness: 240,
                    heineken: 196,
                    moretti: 240
                };

                const servingSizes = {
                    pint: 568,
                    half: 284
                };

                const kegSize = 50000;
                const costPerKeg = beerCosts[beer.value];
                const servingSize = servingSizes[serving];
                const costPerServe = (costPerKeg / kegSize) * servingSize;
                const sellPriceExVAT = removeVAT(sellPrice);
                const margin = sellPriceExVAT - costPerServe;
                const gp = (margin / sellPriceExVAT) * 100;

                document.getElementById('draughtGP').textContent = gp.toFixed(1) + '%';
                document.getElementById('draughtMargin').textContent = '‚Ç¨' + margin.toFixed(2);
                document.getElementById('draughtResults').classList.add('active');
                document.getElementById('draughtCompareBtn').disabled = false;

                currentProductData = {
                    name: beer.value.charAt(0).toUpperCase() + beer.value.slice(1) + ' (' + (serving === 'pint' ? 'Pint' : 'Half Pint') + ')',
                    costPerServe: costPerServe,
                    servingSize: servingSize,
                    sellPrice: sellPrice,
                    sellPriceExVAT: sellPriceExVAT,
                    margin: margin,
                    gp: gp
                };
            }

            function calculateCocktailMargin() {
                const sellPrice = parseFloat(document.getElementById('cocktailSellPrice').value);

                if (!sellPrice) {
                    document.getElementById('cocktailCompareBtn').disabled = true;
                    return;
                }

                const costPerServe = 3.07;
                const sellPriceExVAT = removeVAT(sellPrice);
                const margin = sellPriceExVAT - costPerServe;
                const gp = (margin / sellPriceExVAT) * 100;

                document.getElementById('cocktailGP').textContent = gp.toFixed(1) + '%';
                document.getElementById('cocktailMargin').textContent = '‚Ç¨' + margin.toFixed(2);
                document.getElementById('cocktailResults').classList.add('active');
                document.getElementById('cocktailCompareBtn').disabled = false;

                currentProductData = {
                    name: 'Handmade Pornstar Martini',
                    costPerServe: costPerServe,
                    servingSize: 'per cocktail',
                    sellPrice: sellPrice,
                    sellPriceExVAT: sellPriceExVAT,
                    margin: margin,
                    gp: gp
                };
            }

            function calculateCustomMargin() {
                const productSize = parseFloat(document.getElementById('customProductSize').value);
                const cost = parseFloat(document.getElementById('customCost').value);
                const serving = parseFloat(document.getElementById('customServing').value);
                const sellPrice = parseFloat(document.getElementById('customSellPrice').value);

                if (!productSize || !cost || !serving || !sellPrice) {
                    document.getElementById('customCompareBtn').disabled = true;
                    return;
                }

                const costPerML = cost / productSize;
                const costPerServe = costPerML * serving;
                const sellPriceExVAT = removeVAT(sellPrice);
                const margin = sellPriceExVAT - costPerServe;
                const gp = (margin / sellPriceExVAT) * 100;

                document.getElementById('customGP').textContent = gp.toFixed(1) + '%';
                document.getElementById('customMargin').textContent = '‚Ç¨' + margin.toFixed(2);
                document.getElementById('customResults').classList.add('active');
                document.getElementById('customCompareBtn').disabled = false;

                currentProductData = {
                    name: 'Your Custom Product',
                    costPerServe: costPerServe,
                    servingSize: serving + 'ml',
                    sellPrice: sellPrice,
                    sellPriceExVAT: sellPriceExVAT,
                    margin: margin,
                    gp: gp
                };
            }

            function calculateTryPrice(productIndex, portionIndex) {
                const inputId = 'tryPrice_' + productIndex + '_' + portionIndex;
                const resultsId = 'tryResults_' + productIndex + '_' + portionIndex;
                const gpId = 'tryGP_' + productIndex + '_' + portionIndex;
                const marginId = 'tryMargin_' + productIndex + '_' + portionIndex;

                const sellPrice = parseFloat(document.getElementById(inputId).value);
            
                if (!sellPrice || sellPrice <= 0) {
                    document.getElementById(resultsId).classList.remove('active');
                    return;
                }

                const product = winelabProducts[productIndex];
                const portion = product.portions[portionIndex];
                const costPerServe = (product.costPerL / 1000) * portion.size;
                const sellPriceExVAT = removeVAT(sellPrice);
                const margin = sellPriceExVAT - costPerServe;
                const gp = (margin / sellPriceExVAT) * 100;

                document.getElementById(gpId).textContent = gp.toFixed(1) + '%';
                document.getElementById(marginId).textContent = '‚Ç¨' + margin.toFixed(2);
                document.getElementById(resultsId).classList.add('active');
            }

            function showComparison(category) {
                document.getElementById('categorySelection').style.display = 'none';
                document.querySelectorAll('.input-section').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById('comparisonSection').classList.add('active');

                const grid = document.getElementById('comparisonGrid');
                grid.innerHTML = '';

                const yourCard = document.createElement('div');
                yourCard.className = 'comparison-card your-product';
                yourCard.innerHTML = `
                    <div class="card-title">${currentProductData.name}</div>
                    <div class="card-details">
                        <div class="detail-row">
                            <span>Cost per Serve:</span>
                            <span>‚Ç¨${currentProductData.costPerServe.toFixed(2)}</span>
                        </div>
                        <div class="detail-row">
                            <span>Sell Price (inc VAT):</span>
                            <span>‚Ç¨${currentProductData.sellPrice.toFixed(2)}</span>
                        </div>
                        <div class="detail-row">
                            <span>Sell Price (ex VAT):</span>
                            <span>‚Ç¨${currentProductData.sellPriceExVAT.toFixed(2)}</span>
                        </div>
                        <div class="detail-row">
                            <span>Gross Profit %:</span>
                            <span>${currentProductData.gp.toFixed(1)}%</span>
                        </div>
                        <div class="detail-row">
                            <span>Cash Margin:</span>
                            <span>‚Ç¨${currentProductData.margin.toFixed(2)}</span>
                        </div>
                    </div>
                `;
                grid.appendChild(yourCard);

                winelabProducts.forEach((product, productIndex) => {
                    const card = document.createElement('div');
                    card.className = 'comparison-card';
                
                    let portionsHTML = '';
                    product.portions.forEach((portion, portionIndex) => {
                        const costPerServe = (product.costPerL / 1000) * portion.size;
                        const sellPriceExVAT = removeVAT(portion.sellPrice);
                        const margin = sellPriceExVAT - costPerServe;
                        const gp = (margin / sellPriceExVAT) * 100;

                        portionsHTML += `
                            <div style="margin-top: ${portionIndex > 0 ? '15px' : '0'}; padding-top: ${portionIndex > 0 ? '15px' : '0'}; border-top: ${portionIndex > 0 ? '2px solid #e0e0e0' : 'none'};">
                                <div style="font-weight: bold; margin-bottom: 10px; color: #667eea;">${portion.size}ml Serve</div>
                                <div class="detail-row">
                                    <span>Cost per Serve:</span>
                                    <span>‚Ç¨${costPerServe.toFixed(2)}</span>
                                </div>
                                <div class="detail-row">
                                    <span>Sell Price (inc VAT):</span>
                                    <span>‚Ç¨${portion.sellPrice.toFixed(2)}</span>
                                </div>
                                <div class="detail-row">
                                    <span>Sell Price (ex VAT):</span>
                                    <span>‚Ç¨${sellPriceExVAT.toFixed(2)}</span>
                                </div>
                                <div class="detail-row">
                                    <span>Gross Profit %:</span>
                                    <span>${gp.toFixed(1)}%</span>
                                </div>
                                <div class="detail-row">
                                    <span>Cash Margin:</span>
                                    <span>‚Ç¨${margin.toFixed(2)}</span>
                                </div>
                                <div class="try-price-section">
                                    <div class="try-price-title">üí° Try Your Own Sell Price</div>
                                    <div class="try-price-input">
                                        <input type="number" id="tryPrice_${productIndex}_${portionIndex}" placeholder="‚Ç¨0.00" step="0.01" oninput="calculateTryPrice(${productIndex}, ${portionIndex})">
                                    </div>
                                    <div id="tryResults_${productIndex}_${portionIndex}" class="try-price-results">
                                        <div class="detail-row">
                                            <span>Your GP %:</span>
                                            <span id="tryGP_${productIndex}_${portionIndex}">0%</span>
                                        </div>
                                        <div class="detail-row">
                                            <span>Your Cash Margin:</span>
                                            <span id="tryMargin_${productIndex}_${portionIndex}">‚Ç¨0.00</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                    });

                    card.innerHTML = `
                        <div class="card-title">${product.name}</div>
                        <img src="${product.image}" alt="${product.name}" class="product-image">
                        <div class="card-details">
                            ${portionsHTML}
                        </div>
                    `;
                    grid.appendChild(card);
                });
            }

            function backToInput() {
                document.getElementById('categorySelection').style.display = 'grid';
                document.getElementById('comparisonSection').classList.remove('active');
            
                if (currentCategory === 'draught') {
                    document.getElementById('draughtSection').classList.add('active');
                } else if (currentCategory === 'cocktail') {
                    document.getElementById('cocktailSection').classList.add('active');
                } else if (currentCategory === 'custom') {
                    document.getElementById('customSection').classList.add('active');
                }
            }
        </script>
    </body>
    </html>
        
